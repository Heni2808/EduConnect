<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduConnect</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/normalize.css">
</head>

<body>


    <header class="main-header">
        <nav class="main-nav">
            <div class="logo">
                <span>EduConnect</span>
            </div>
            <div class="nav-links">
                <a href="index.html">Inicio</a>
                <a href="catalogo.html">Cat√°logo</a>
                <a href="mis_cursos.html">Mis Cursos</a>
                <a href="calificaciones.html">Calificaciones</a>
            </div>
            <div class="user-section">
                <div class="user-avatar" id="userAvatar">JD</div>
                <button class="logout-btn" id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </nav>
    </header>


    <section class="course-hero">
        <div class="course-hero-content">
            <h1>Gesti√≥n de Proyectos √Ågiles</h1>
            <p>Aprende metodolog√≠as √°giles para liderar proyectos exitosos. Domina Scrum, Kanban y otras t√©cnicas para
                mejorar la eficiencia de tus equipos.</p>

            <div class="course-meta">
                <div class="meta-item">
                    <span>‚è± 8 semanas</span>
                </div>
                <div class="meta-item">
                    <span>üìà Nivel: Intermedio</span>
                </div>
                <div class="meta-item">
                    <span>üë• 1,240 estudiantes</span>
                </div>
                <div class="meta-item">
                    <span>‚≠ê 4.7 (320 rese√±as)</span>
                </div>
            </div>
        </div>
    </section>


    <main class="course-main">

        <aside class="course-sidebar">
            <div class="sidebar-section">
                <h3>Tu progreso</h3>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">
                        <span>Progreso del curso</span>
                        <span id="progressText">0%</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Instructor</h3>
                <div class="instructor-card">
                    <div class="instructor-avatar">CM</div>
                    <div>
                        <h4>Carlos M</h4>
                        <p>PMP, Scrum Master Certificado</p>
                    </div>
                </div>
                <p>Especialista en gesti√≥n de proyectos con m√°s de 15 a√±os de experiencia. Ha liderado proyectos en
                    empresas como TechCorp y GlobalSolutions.</p>
            </div>

            <div class="sidebar-section">
                <h3>Acciones</h3>
                <div class="course-actions">
                    <button class="course-action-btn">
                        <span>üì•</span> Descargar recursos
                    </button>
                    <button class="course-action-btn secondary">
                        <span>‚ùì</span> Soporte t√©cnico
                    </button>
                    <button class="course-action-btn secondary">
                        <span>üèÜ</span> Solicitar certificado
                    </button>
                </div>
            </div>
        </aside>


        <div class="course-content">
            <div class="course-tabs">
                <div class="course-tab active" data-tab="contenido">Contenido del curso</div>
                <div class="course-tab" data-tab="recursos">Recursos</div>
                <div class="course-tab" data-tab="proyecto">Proyecto final</div>

            </div>


            <div class="tab-content active" id="contenido">
                <h3 style="margin-bottom: 20px;">M√≥dulos del curso</h3>

                <ul class="module-list" id="moduleList">
                    <li class="module-item" data-module="1">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 1: Introducci√≥n a la Gesti√≥n de Proyectos</h4>
                            <p>Ciclo de vida de proyectos y metodolog√≠as tradicionales</p>
                        </div>
                        <div class="module-duration">45 min</div>
                    </li>
                    <li class="module-item" data-module="2">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 2: Fundamentos de Metodolog√≠as √Ågiles</h4>
                            <p>Manifiesto √Ågil, valores y principios</p>
                        </div>
                        <div class="module-duration">50 min</div>
                    </li>
                    <li class="module-item" data-module="3">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 3: Scrum Framework</h4>
                            <p>Roles, artefactos y ceremonias en Scrum</p>
                        </div>
                        <div class="module-duration">60 min</div>
                    </li>
                    <li class="module-item" data-module="4">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 4: Planificaci√≥n de Sprints</h4>
                            <p>Creaci√≥n de backlog y estimaci√≥n de tareas</p>
                        </div>
                        <div class="module-duration">55 min</div>
                    </li>
                    <li class="module-item" data-module="5">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 5: Kanban y Gesti√≥n Visual</h4>
                            <p>Flujo de trabajo y limitaci√≥n de trabajo en progreso</p>
                        </div>
                        <div class="module-duration">50 min</div>
                    </li>
                    <li class="module-item" data-module="6">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 6: M√©tricas √Ågiles</h4>
                            <p>Velocidad, burndown charts y lead time</p>
                        </div>
                        <div class="module-duration">55 min</div>
                    </li>
                    <li class="module-item" data-module="7">
                        <div class="module-icon">
                            <span>‚ñ∂</span>
                        </div>
                        <div class="module-content">
                            <h4>M√≥dulo 7: Retrospectivas y Mejora Continua</h4>
                            <p>T√©cnicas para identificar mejoras en procesos</p>
                        </div>
                        <div class="module-duration">60 min</div>
                    </li>
                    <li class="module-item" data-module="8">
                        <div class="module-icon">
                            <span>üìù</span>
                        </div>
                        <div class="module-content">
                            <h4>Proyecto final integrador</h4>
                            <p>Planificaci√≥n completa de un proyecto √°gil</p>
                        </div>
                        <div class="module-duration">90 min</div>
                    </li>
                </ul>
            </div>


            <div class="tab-content" id="recursos">
                <h3 style="margin-bottom: 20px;">Recursos del curso</h3>

                <div class="resources-grid">
                    <div class="resource-card">
                        <div class="resource-icon">
                            <span>üìÑ</span>
                        </div>
                        <h4>Gu√≠a de Metodolog√≠as √Ågiles</h4>
                        <p>Comparativo detallado de Scrum, Kanban y otras metodolog√≠as</p>
                    </div>

                    <div class="resource-card">
                        <div class="resource-icon">
                            <span>üìä</span>
                        </div>
                        <h4>Plantillas de Planificaci√≥n</h4>
                        <p>Backlog, plan de sprints y tableros Kanban editables</p>
                    </div>

                    <div class="resource-card">
                        <div class="resource-icon">
                            <span>üìö</span>
                        </div>
                        <h4>Casos de Estudio</h4>
                        <p>Ejemplos reales de implementaci√≥n √°gil en diferentes industrias</p>
                    </div>

                    <div class="resource-card">
                        <div class="resource-icon">
                            <span>üõ†Ô∏è</span>
                        </div>
                        <h4>Herramientas Digitales</h4>
                        <p>Gu√≠a comparativa de Jira, Trello, Asana y otras herramientas</p>
                    </div>
                </div>

                <div style="margin-top: 30px; background: #e8f5e9; padding: 20px; border-radius: var(--border-radius);">
                    <h4 style="color: var(--ml-color); margin-bottom: 15px;">
                        <span>‚ñ∂</span> Video: Planificaci√≥n de Sprints Efectivos
                    </h4>
                    <div
                        style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: var(--border-radius); background: #000; margin-bottom: 20px;">
                        <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                            src="https://youtu.be/FhiOeECwsS8?si=q5ZRUFkzUoMX4z5X" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen></iframe>
                    </div>
                    <p>Aprende t√©cnicas para estimar tareas, priorizar backlog y planificar sprints exitosos.</p>
                </div>
            </div>


            <div class="tab-content" id="proyecto">
                <div class="project-section">
                    <h3><span>üìÇ</span> Proyecto Final</h3>

                    <div class="project-description">
                        <p>Desarrolla un plan completo para un proyecto utilizando metodolog√≠as √°giles. Incluye
                            definici√≥n de alcance, planificaci√≥n de sprints, roles y m√©tricas de √©xito.</p>

                        <h4 style="margin-top: 20px; margin-bottom: 15px; color: var(--dark-color);">Requisitos del
                            proyecto:</h4>
                        <ul>
                            <li>Selecci√≥n y justificaci√≥n de metodolog√≠a √°gil</li>
                            <li>Definici√≥n de roles y responsabilidades</li>
                            <li>Planificaci√≥n de al menos 3 sprints con user stories</li>
                            <li>Dise√±o de un tablero Kanban</li>
                            <li>Definici√≥n de m√©tricas de √©xito y plan de retrospectivas</li>
                            <li>An√°lisis de riesgos y plan de mitigaci√≥n</li>
                        </ul>

                        <p style="margin-top: 20px;"><strong>Formato de entrega:</strong> Documento PDF con la
                            planificaci√≥n completa y presentaci√≥n en PowerPoint.</p>

                        <div class="deadline">
                            <span>‚ö†Ô∏è</span>
                            <span>Fecha l√≠mite de entrega: 15 de Enero, 2026</span>
                        </div>
                    </div>

                    <div class="upload-form">
                        <h4 style="margin-bottom: 20px; color: var(--dark-color);">Entregar proyecto</h4>

                        <div class="form-group">
                            <label>Documento de planificaci√≥n (PDF)</label>
                            <div class="file-input-container" id="fileInputContainer">
                                <span>üìÑ</span>
                                <p>Arrastra tu archivo aqu√≠ o haz clic para seleccionar</p>
                                <p style="font-size: 0.9rem;">Tama√±o m√°ximo: 10MB</p>
                                <input type="file" class="file-input" id="pdfFile" accept=".pdf">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Presentaci√≥n (PPTX - Opcional)</label>
                            <div class="file-input-container" id="pptInputContainer">
                                <span>üìä</span>
                                <p>Arrastra tu archivo aqu√≠ o haz clic para seleccionar</p>
                                <p style="font-size: 0.9rem;">Tama√±o m√°ximo: 20MB</p>
                                <input type="file" class="file-input" id="pptFile" accept=".pptx,.ppt">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Comentarios adicionales</label>
                            <textarea
                                style="width: 100%; padding: 12px; border: 1px solid #e9ecef; border-radius: var(--border-radius); min-height: 100px;"
                                placeholder="Explica cualquier aspecto relevante de tu proyecto..."></textarea>
                        </div>

                        <button class="submit-btn" id="submitBtn">Enviar proyecto</button>

                        <div class="submission-status" id="submissionStatus">
                            <p><span>‚úÖ</span> Tu proyecto ha sido enviado con √©xito.</p>
                            <p style="margin-top: 10px;">Fecha de entrega: <span id="submissionDate"></span></p>
                        </div>
                    </div>
                </div>
            </div>

    </main>

    <footer class="main-footer">
        <div>
            <p>¬© 2025 Genesia A - Todos los derechos reservados</p>
        </div>
    </footer>

    <script>
        // FUNCIONES COMUNES - INICIO
        function obtenerIniciales(nombreCompleto) {
            if (!nombreCompleto) return 'US';
            return nombreCompleto.split(' ')
                .filter(palabra => palabra.length > 0)
                .map(palabra => palabra[0])
                .join('')
                .toUpperCase()
                .substring(0, 2);
        }

        function obtenerProgresoCurso(usuario, cursoId) {
            if (!usuario || !usuario.progresoCursos) return 0;
            return usuario.progresoCursos[cursoId] || 0;
        }

        function actualizarProgreso(cursoId, nuevoProgreso) {
            const usuarioActual = JSON.parse(localStorage.getItem('usuarioActual'));
            const todosUsuarios = JSON.parse(localStorage.getItem('usuarios')) || [];

            if (!usuarioActual) return;

            if (!usuarioActual.progresoCursos) {
                usuarioActual.progresoCursos = {};
            }

            usuarioActual.progresoCursos[cursoId] = nuevoProgreso;
            localStorage.setItem('usuarioActual', JSON.stringify(usuarioActual));

            const usuarioIndex = todosUsuarios.findIndex(u => u.username === usuarioActual.username);
            if (usuarioIndex !== -1) {
                todosUsuarios[usuarioIndex] = usuarioActual;
                localStorage.setItem('usuarios', JSON.stringify(todosUsuarios));
            }

            return usuarioActual;
        }

        function setupCommonFunctions() {
            // Verificar sesi√≥n
            const usuarioActual = JSON.parse(localStorage.getItem('usuarioActual'));
            if (!usuarioActual) {
                window.location.href = 'iniciar-crear.html';
                return;
            }

            // Actualizar avatar de usuario
            const userAvatar = document.getElementById('userAvatar');
            if (userAvatar) {
                userAvatar.textContent = obtenerIniciales(usuarioActual.nombre);
            }

            // Marcar enlace activo
            const currentPage = location.pathname.split('/').pop();
            document.querySelectorAll('.nav-links a').forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });

            // Cerrar sesi√≥n
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    localStorage.removeItem('usuarioActual');
                    localStorage.removeItem('sesionActiva');
                    window.location.href = 'iniciar-crear.html';
                });
            }
        }
        // FUNCIONES COMUNES - FIN

        document.addEventListener('DOMContentLoaded', () => {
            setupCommonFunctions();

            // ID del curso actual (Gesti√≥n de Proyectos)
            const cursoId = 8;

            // Obtener usuario actual
            const usuarioActual = JSON.parse(localStorage.getItem('usuarioActual'));
            if (!usuarioActual) return;

            // Obtener progreso del curso
            let progreso = obtenerProgresoCurso(usuarioActual, cursoId);

            // Actualizar barra de progreso
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            if (progressFill) progressFill.style.width = `${progreso}%`;
            if (progressText) progressText.textContent = `${progreso}%`;

            // Marcar m√≥dulos completados
            const completedModules = usuarioActual.modulosCompletados?.[cursoId] || [];
            completedModules.forEach(moduleId => {
                const moduleElement = document.querySelector(`.module-item[data-module="${moduleId}"]`);
                if (moduleElement) {
                    moduleElement.classList.add('completed');
                    const iconSpan = moduleElement.querySelector('.module-icon span');
                    if (iconSpan) iconSpan.textContent = '‚úì';
                }
            });

            // Sistema de pesta√±as
            const tabs = document.querySelectorAll('.course-tab');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover clase activa de todas las pesta√±as y contenidos
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));

                    // Agregar clase activa a la pesta√±a seleccionada
                    tab.classList.add('active');

                    // Mostrar el contenido correspondiente
                    const tabId = tab.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Enviar proyecto (mediante PDF)
            const submitBtn = document.getElementById('submitBtn');
            const submissionStatus = document.getElementById('submissionStatus');
            const submissionDate = document.getElementById('submissionDate');

            if (submitBtn) {
                submitBtn.addEventListener('click', function () {
                    const pdfInput = document.getElementById('pdfFile');
                    if (!pdfInput || !pdfInput.files.length) {
                        if (submissionStatus) {
                            submissionStatus.className = 'submission-status error';
                            submissionStatus.innerHTML = '<p><span>‚ùå</span> Por favor, adjunta el documento de planificaci√≥n (PDF).</p>';
                        }
                        return;
                    }

                    // Simular env√≠o exitoso
                    if (submissionStatus) {
                        submissionStatus.className = 'submission-status success';
                        submissionStatus.innerHTML = '<p><span>‚úÖ</span> Tu proyecto ha sido enviado con √©xito.</p>';
                    }

                    // Actualizar progreso al 100% al entregar proyecto
                    if (progreso < 100) {
                        progreso = 100;
                        if (progressFill) progressFill.style.width = `${progreso}%`;
                        if (progressText) progressText.textContent = `${progreso}%`;
                        const usuarioActualizado = actualizarProgreso(cursoId, progreso);

                        // Marcar todos los m√≥dulos como completados
                        document.querySelectorAll('.module-item').forEach(item => {
                            item.classList.add('completed');
                            const iconSpan = item.querySelector('.module-icon span');
                            if (iconSpan) iconSpan.textContent = '‚úì';

                            // Guardar m√≥dulo completado
                            const moduleId = item.dataset.module;
                            if (usuarioActualizado && !usuarioActualizado.modulosCompletados) {
                                usuarioActualizado.modulosCompletados = {};
                            }
                            if (usuarioActualizado && !usuarioActualizado.modulosCompletados[cursoId]) {
                                usuarioActualizado.modulosCompletados[cursoId] = [];
                            }
                            if (usuarioActualizado && !usuarioActualizado.modulosCompletados[cursoId].includes(parseInt(moduleId))) {
                                usuarioActualizado.modulosCompletados[cursoId].push(parseInt(moduleId));
                            }
                        });

                        if (usuarioActualizado) {
                            localStorage.setItem('usuarioActual', JSON.stringify(usuarioActualizado));
                        }
                    }

                    // Mostrar fecha y hora de entrega
                    if (submissionDate) {
                        const now = new Date();
                        submissionDate.textContent = now.toLocaleString('es-ES', {
                            day: '2-digit',
                            month: 'long',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                    }

                    // Deshabilitar bot√≥n despu√©s de env√≠o exitoso
                    submitBtn.disabled = true;
                });
            }

            // Marcar m√≥dulos como completados
            const moduleItems = document.querySelectorAll('.module-item');
            moduleItems.forEach(item => {
                item.addEventListener('click', function () {
                    const moduleId = this.dataset.module;

                    // Si ya est√° completado, no hacer nada
                    if (this.classList.contains('completed')) return;

                    // Marcar como completado
                    this.classList.add('completed');
                    const iconSpan = this.querySelector('.module-icon span');
                    if (iconSpan) iconSpan.textContent = '‚úì';

                    // Actualizar progreso (cada m√≥dulo aporta ~12.5%)
                    const incremento = 100 / moduleItems.length;
                    progreso = Math.min(progreso + incremento, 100);

                    // Actualizar barra de progreso
                    if (progressFill) progressFill.style.width = `${progreso}%`;
                    if (progressText) progressText.textContent = `${Math.round(progreso)}%`;

                    // Guardar en localStorage
                    const usuarioActualizado = actualizarProgreso(cursoId, progreso);

                    // Guardar m√≥dulo completado
                    if (usuarioActualizado) {
                        if (!usuarioActualizado.modulosCompletados) {
                            usuarioActualizado.modulosCompletados = {};
                        }
                        if (!usuarioActualizado.modulosCompletados[cursoId]) {
                            usuarioActualizado.modulosCompletados[cursoId] = [];
                        }
                        if (!usuarioActualizado.modulosCompletados[cursoId].includes(parseInt(moduleId))) {
                            usuarioActualizado.modulosCompletados[cursoId].push(parseInt(moduleId));
                            localStorage.setItem('usuarioActual', JSON.stringify(usuarioActualizado));
                        }
                    }
                });
            });

            // Manejar arrastrar y soltar archivos (solo para este curso)
            const fileContainers = document.querySelectorAll('.file-input-container');
            fileContainers.forEach(container => {
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    container.style.borderColor = 'var(--gp-color)'; // Color espec√≠fico para Gesti√≥n de Proyectos
                    container.style.backgroundColor = '#f0f4ff';
                });

                container.addEventListener('dragleave', () => {
                    container.style.borderColor = '#e9ecef';
                    container.style.backgroundColor = '';
                });

                container.addEventListener('drop', (e) => {
                    e.preventDefault();
                    container.style.borderColor = '#e9ecef';
                    container.style.backgroundColor = '';

                    const fileInput = container.querySelector('.file-input');
                    if (e.dataTransfer.files.length && fileInput) {
                        fileInput.files = e.dataTransfer.files;
                        const fileNameDisplay = container.querySelector('p');
                        if (fileNameDisplay) {
                            fileNameDisplay.textContent = `Archivo seleccionado: ${e.dataTransfer.files[0].name}`;
                        }
                    }
                });

                container.addEventListener('click', () => {
                    const fileInput = container.querySelector('.file-input');
                    if (fileInput) {
                        fileInput.click();
                    }
                });
            });
        });
    </script>

</body>

</html>